class Solution :      def maximalRectangle ( self , matrix ) :          if not matrix :              return 0  len_row , len_col = len ( matrix ) , len ( matrix [ 0 ] ) if len_row < 1 or len_col < 1 :              return 0  heights = [ [ 0 ] * ( len_col + 1 ) for i in xrange ( len_row ) ] for r in xrange ( len_row ) :              for c in xrange ( len_col ) :                  if r == 0 :                      heights [ r ] [ c ] = matrix [ r ] [ c ]  else :                      heights [ r ] [ c ] = heights [ r - 1 ] [ c ] + 1 if matrix [ r ] [ c ] == 1 else 0    result = 0 for row in xrange ( len_row ) :              cur_q = [ ] for col in xrange ( len_col + 1 ) :                  while cur_q and heights [ row ] [ col ] < heights [ row ] [ cur_q [ - 1 ] ] :                      top_idx = cur_q . pop ( ) width = col if not cur_q else col - cur_q [ - 1 ] - 1 result = max ( result , heights [ row ] [ top_idx ] * width )  cur_q . append ( col )   return result    