class Solution :      def isScramble ( self , s1 , s2 ) :          if not s1 and not s2 :              return False  if not s1 or not s2 :              return True  if set ( s1 ) != set ( s2 ) :              return False  lens = len ( s1 ) dp = [ [ [ False ] * ( lens + 1 ) for j in xrange ( lens ) ] for i in xrange ( lens ) ] for i in xrange ( lens ) :              for j in xrange ( lens ) :                  dp [ i ] [ j ] [ 1 ] = s1 [ i ] == s2 [ j ]   for l in xrange ( 2 , lens + 1 ) :              for i in xrange ( 0 , lens - l + 1 ) :                  for j in xrange ( 0 , lens - l + 1 ) :                      for k in xrange ( 1 , l ) :                          regular = dp [ i ] [ j ] [ k ] and dp [ i + k ] [ j + k ] [ l - k ] opposite = dp [ i ] [ j + l - k ] [ k ] and dp [ i + k ] [ j ] [ l - k ] if regular or opposite :                              dp [ i ] [ j ] [ l ] = True break      return dp [ 0 ] [ 0 ] [ lens ]    