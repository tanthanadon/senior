import sys from himlarcli . parser import Parser from himlarcli . printer import Printer from himlarcli . slack import Slack from himlarcli . twitter import Twitter from himlarcli . status import Status from himlarcli import utils as himutils himutils . is_virtual_env ( ) parser = Parser ( ) options = parser . parse_args ( ) printer = Printer ( options . format ) slack = Slack ( options . config , debug = options . debug ) twitter = Twitter ( options . config , debug = options . debug ) status = Status ( options . config , debug = options . debug ) def confirm_publish ( final_msg ) :      print ( <str> % final_msg ) if not himutils . confirm_action ( <str> ) :          sys . exit ( 1 )   def parse_template ( ) :      mapping = { } if options . region :          mapping [ <str> ] = options . region . upper ( )  if options . date :          mapping [ <str> ] = options . date  msg_content = himutils . load_template ( inputfile = options . template , mapping = mapping ) stripped_msg = msg_content . rstrip ( <str> ) return stripped_msg  def action_important ( ) :      important_msg = msg if options . link :          important_msg += <str>  confirm_publish ( important_msg ) if not twitter . twitter_length ( important_msg ) :          himutils . sys_error ( <str> )  slack . publish_slack ( important_msg ) twitter . publish_twitter ( important_msg ) status . publish ( important_msg , msg_type = <str> )  def action_news ( ) :      if not twitter . twitter_length ( msg ) :          himutils . sys_error ( <str> )  confirm_publish ( msg ) slack . publish_slack ( msg ) twitter . publish_twitter ( msg ) status . publish ( msg )  def action_info ( ) :      if not twitter . twitter_length ( msg ) :          himutils . sys_error ( <str> )  confirm_publish ( msg ) twitter . publish_twitter ( msg ) status . publish ( msg )  def action_event ( ) :      confirm_publish ( msg ) status . publish ( msg , msg_type = <str> )  if options . message :      msg = options . message  elif options . template :      msg = parse_template ( )  else :      himutils . sys_error ( <str> )  slack . set_dry_run ( options . dry_run ) twitter . set_dry_run ( options . dry_run ) status . set_dry_run ( options . dry_run ) action = locals ( ) . get ( <str> + options . action ) if not action :      himutils . sys_error ( <str> % options . action )  action ( )  