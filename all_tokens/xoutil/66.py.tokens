from codecs import * from codecs import __all__ __all__ = list ( __all__ ) def force_encoding ( encoding = None ) :      import locale return encoding or locale . getdefaultlocale ( ) [ 1 ] or <str>  def safe_decode ( s , encoding = None ) :      if isinstance ( s , str ) :          return s  else :          encoding = force_encoding ( encoding ) try :              return str ( s , encoding , <str> )  except LookupError :              return safe_decode ( s )  except TypeError :              return str ( s )    def safe_encode ( u , encoding = None ) :      if isinstance ( u , bytes ) :          return u  else :          encoding = force_encoding ( encoding ) try :              try :                  if isinstance ( u , str ) :                      return bytes ( u , encoding , <str> )  else :                      return str ( u ) . encode ( encoding , <str> )   except ( UnicodeError , TypeError ) :                  return str ( u ) . encode ( encoding , <str> )   except LookupError :              return safe_encode ( u )    __all__ += ( <str> , <str> , <str> )  