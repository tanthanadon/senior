import os import imp import numpy as np import matplotlib . pyplot as plt from jaratoolbox import settings reload ( settings ) from jaratest . stacy import reward_change_loader_plotter_functions_stacy as rcfuncs reload ( rcfuncs ) import matplotlib . gridspec as gridspec import matplotlib . patches as mpatches colorDictRC = { <str> : <str> , <str> : <str> , <str> : <str> , <str> : <str> , <str> : <str> , <str> : <str> } inforecFilepath = settings . INFOREC_PATH animal = <str> inforecFilename = <str> inforecFullpath = os . path . join ( inforecFilepath , animal , inforecFilename ) inforec = imp . load_source ( <str> , inforecFullpath ) outputDir = os . path . join ( settings . EPHYS_PATH , animal , <str> ) if not os . path . exists ( outputDir ) :      os . mkdir ( outputDir )  expIndToPlot = - 1 siteIndToPlot = 0 site = inforec . experiments [ expIndToPlot ] . sites [ siteIndToPlot ] date = site . date tuningSessionInd = site . session_types ( ) . index ( <str> ) tuningEphysThisSite = site . session_ephys_dirs ( ) [ tuningSessionInd ] tuningBehavThisSite = site . session_behav_filenames ( ) [ tuningSessionInd ] try :      rcInd = site . session_types ( ) . index ( <str> ) rcEphysThisSite = site . session_ephys_dirs ( ) [ rcInd ] rcBehavThisSite = site . session_behav_filenames ( ) [ rcInd ]  except ValueError :      print <str>  for tetrode in site . tetrodes :      clusterList = rcfuncs . set_clusters_from_file ( animal , rcEphysThisSite , tetrode ) numClusters = np . unique ( clusterList ) for cluster in numClusters :          plt . figure ( figsize = ( 18 , 12 ) ) gs = gridspec . GridSpec ( 3 , 3 ) gs . update ( left = 0.1 , right = 0.9 , wspace = 0.3 , hspace = 0.3 ) gs00 = gridspec . GridSpecFromSubplotSpec ( 3 , 3 , subplot_spec = gs [ 0 , 1 ] , hspace = 0.1 ) gs01 = gridspec . GridSpecFromSubplotSpec ( 3 , 3 , subplot_spec = gs [ 1 , 1 ] , hspace = 0.1 ) gs02 = gridspec . GridSpecFromSubplotSpec ( 3 , 3 , subplot_spec = gs [ 0 , 2 ] , hspace = 0.1 ) gs03 = gridspec . GridSpecFromSubplotSpec ( 3 , 3 , subplot_spec = gs [ 1 , 2 ] , hspace = 0.1 ) gs04 = gridspec . GridSpecFromSubplotSpec ( 3 , 3 , subplot_spec = gs [ 1 , 0 ] , hspace = 0.1 ) ax1 = plt . subplot ( gs [ 0 , 0 ] ) rcfuncs . plot_tuning_raster ( animal , tuningEphysThisSite , tuningBehavThisSite , tetrode , cluster , intensity = 50 , timeRange = [ - 0.5 , 1 ] ) ax2 = plt . subplot ( gs00 [ 0 : 2 , : ] ) rcfuncs . plot_reward_change_raster ( animal , rcBehavThisSite , rcEphysThisSite , tetrode , cluster , freqToPlot = <str> , byBlock = True , alignment = <str> , timeRange = [ - 0.3 , 0.4 ] ) ax3 = plt . subplot ( gs00 [ 2 , : ] ) rcfuncs . plot_reward_change_psth ( animal , rcBehavThisSite , rcEphysThisSite , tetrode , cluster , freqToPlot = <str> , byBlock = True , alignment = <str> , timeRange = [ - 0.3 , 0.4 ] , binWidth = 0.010 ) ax4 = plt . subplot ( gs01 [ 0 : 2 , : ] ) rcfuncs . plot_reward_change_raster ( animal , rcBehavThisSite , rcEphysThisSite , tetrode , cluster , freqToPlot = <str> , byBlock = True , alignment = <str> , timeRange = [ - 0.3 , 0.5 ] ) ax5 = plt . subplot ( gs01 [ 2 , : ] ) rcfuncs . plot_reward_change_psth ( animal , rcBehavThisSite , rcEphysThisSite , tetrode , cluster , freqToPlot = <str> , byBlock = True , alignment = <str> , timeRange = [ - 0.3 , 0.5 ] , binWidth = 0.010 ) ax6 = plt . subplot ( gs02 [ 0 : 2 , : ] ) rcfuncs . plot_reward_change_raster ( animal , rcBehavThisSite , rcEphysThisSite , tetrode , cluster , freqToPlot = <str> , byBlock = True , alignment = <str> , timeRange = [ - 0.3 , 0.4 ] ) ax7 = plt . subplot ( gs02 [ 2 , : ] ) rcfuncs . plot_reward_change_psth ( animal , rcBehavThisSite , rcEphysThisSite , tetrode , cluster , freqToPlot = <str> , byBlock = True , alignment = <str> , timeRange = [ - 0.3 , 0.4 ] , binWidth = 0.010 ) ax8 = plt . subplot ( gs03 [ 0 : 2 , : ] ) rcfuncs . plot_reward_change_raster ( animal , rcBehavThisSite , rcEphysThisSite , tetrode , cluster , freqToPlot = <str> , byBlock = True , alignment = <str> , timeRange = [ - 0.3 , 0.5 ] ) ax9 = plt . subplot ( gs03 [ 2 , : ] ) rcfuncs . plot_reward_change_psth ( animal , rcBehavThisSite , rcEphysThisSite , tetrode , cluster , freqToPlot = <str> , byBlock = True , alignment = <str> , timeRange = [ - 0.3 , 0.5 ] , binWidth = 0.010 ) ax10 = plt . subplot ( gs04 [ 0 : 2 , : ] ) rcfuncs . plot_movement_response_raster ( animal , rcBehavThisSite , rcEphysThisSite , tetrode , cluster , alignment = <str> , timeRange = [ - 0.3 , 0.5 ] ) ax11 = plt . subplot ( gs04 [ 2 , : ] ) rcfuncs . plot_movement_response_psth ( animal , rcBehavThisSite , rcEphysThisSite , tetrode , cluster , alignment = <str> , timeRange = [ - 0.3 , 0.5 ] , binWidth = 0.010 ) ax12 = plt . subplot ( gs [ 2 , 0 ] ) rcfuncs . plot_waveform_each_cluster ( animal , rcEphysThisSite , tetrode , cluster ) ax13 = plt . subplot ( gs [ 2 , 1 ] ) rcfuncs . plot_isi_loghist_each_cluster ( animal , rcEphysThisSite , tetrode , cluster ) ax14 = plt . subplot ( gs [ 2 , 2 ] ) rcfuncs . plot_events_in_time_each_cluster ( animal , rcEphysThisSite , tetrode , cluster ) figname = <str> . format ( animal , date , tetrode , cluster ) figFullPath = os . path . join ( outputDir , figname ) plt . savefig ( figFullPath )    