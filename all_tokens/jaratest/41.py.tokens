from jaratoolbox import loadbehavior reload ( loadbehavior ) import copy from jaratest . nick . behavior import soundtypes from jaratoolbox import behavioranalysis from matplotlib import pyplot as plt import numpy as np from jaratoolbox import extraplots from jaratoolbox import colorpalette fontsize = 24 from statsmodels . stats . proportion import proportion_confint subjects = [ <str> , <str> ] sessions = [ <str> , <str> , <str> , <str> , <str> , <str> , <str> , <str> , <str> ] dayLengths = [ [ x for x in range ( 4 ) ] , [ 3 , 4 ] , [ x for x in range ( 4 , 9 ) ] ] nSessions = len ( sessions ) plt . figure ( ) percentCorrect = [ ] nTrialsEachValue = np . empty ( nSessions , dtype = int ) nHitsEachValue = np . empty ( nSessions , dtype = int ) for indSubject , subject in enumerate ( subjects ) :      percentCorrect . append ( [ ] ) for indSession , session in enumerate ( sessions ) :          bdata = behavioranalysis . load_many_sessions ( subject , [ session ] ) rewarded = float ( bdata [ <str> ] [ - 1 ] ) valid = float ( sum ( bdata [ <str> ] ) ) percentCorrect [ indSubject ] . append ( np . divide ( rewarded , valid ) ) nHitsEachValue [ indSession ] = rewarded nTrialsEachValue [ indSession ] = valid  ciHitsEachValue = np . array ( proportion_confint ( nHitsEachValue , nTrialsEachValue , method = <str> ) ) upperWhisker = ciHitsEachValue [ 1 , : ] - percentCorrect [ indSubject ] lowerWhisker = percentCorrect [ indSubject ] - ciHitsEachValue [ 0 , : ] ( pline , pcaps , pbars ) = plt . errorbar ( dayLengths [ 0 ] , percentCorrect [ indSubject ] [ : 4 ] , yerr = [ lowerWhisker [ : 4 ] , upperWhisker [ : 4 ] ] , color = <str> ) ( pline , pcaps , pbars ) = plt . errorbar ( dayLengths [ 2 ] , percentCorrect [ indSubject ] [ 4 : 9 ] , yerr = [ lowerWhisker [ 4 : 9 ] , upperWhisker [ 4 : 9 ] ] , color = <str> ) ax = pline . axes extraplots . boxoff ( ax ) extraplots . set_ticks_fontsize ( ax , fontsize ) plt . xlabel ( <str> , fontsize = fontsize ) plt . ylabel ( <str> , fontsize = fontsize ) plt . ylim ( 0.5 , 1.0 ) plt . xlim ( 0 , len ( sessions ) - 1 ) plt . setp ( pline , color = <str> ) plt . setp ( pcaps , color = <str> ) plt . setp ( pbars , color = <str> ) plt . plot ( dayLengths [ 0 ] , percentCorrect [ indSubject ] [ : 4 ] , <str> ) plt . plot ( dayLengths [ 1 ] , percentCorrect [ indSubject ] [ 3 : 5 ] , <str> ) plt . plot ( dayLengths [ 2 ] , percentCorrect [ indSubject ] [ 4 : 9 ] , <str> ) plt . plot ( 9 )  plt . show ( )  