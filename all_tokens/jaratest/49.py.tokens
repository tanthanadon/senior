from jaratoolbox import loadbehavior reload ( loadbehavior ) from jaratoolbox import behavioranalysis reload ( behavioranalysis ) from jaratoolbox import loadopenephys from jaratoolbox import settings import os import numpy as np from pylab import * SAMPLING_RATE = 30000.0 soundTriggerChannel = 0 subject = <str> experimenter = <str> paradigm = <str> behavSession = <str> ephysSession = <str> behavDataFileName = loadbehavior . path_to_behavior_data ( subject , experimenter , paradigm , behavSession ) bdata = loadbehavior . FlexCategBehaviorData ( behavDataFileName , readmode = <str> ) soundOnsetTimeBehav = bdata [ <str> ] ephysDir = os . path . join ( settings . EPHYS_PATH , subject , ephysSession ) eventFilename = os . path . join ( ephysDir , <str> ) events = loadopenephys . Events ( eventFilename ) eventTimes = np . array ( events . timestamps ) / SAMPLING_RATE soundOnsetEvents = ( events . eventID == 1 ) & ( events . eventChannel == soundTriggerChannel ) soundOnsetTimeEphys = eventTimes [ soundOnsetEvents ] missingTrials = behavioranalysis . find_missing_trials ( soundOnsetTimeEphys , soundOnsetTimeBehav ) bdata . remove_trials ( missingTrials ) bdata . find_trials_each_block ( ) soundOnsetTimeBehav = bdata [ <str> ] nTrialsBehav = len ( soundOnsetTimeBehav ) nTrialsEphys = len ( soundOnsetTimeEphys ) print <str> . format ( nTrialsBehav ) print <str> . format ( nTrialsEphys )  