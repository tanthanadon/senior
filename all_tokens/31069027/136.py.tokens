from openerp . osv import orm , fields import openerp . addons . decimal_precision as dp import time class product_supplierinfo ( orm . Model ) :      _inherit = <str> def _get_supplier_currency ( self , cr , uid , ids , name , arg , context = None ) :          res = { } if context is None : context = { } for supp in self . browse ( cr , uid , ids , context = context ) :              res [ supp . id ] = supp . name . property_product_pricelist_purchase and supp . name . property_product_pricelist_purchase . currency_id . id or False  return res  _columns = { <str> : fields . function ( _get_supplier_currency , method = True , string = <str> , readonly = True , type = <str> , relation = <str> ) }  class pricelist_partnerinfo ( orm . Model ) :      _inherit = <str> _columns = { <str> : fields . date ( <str> , required = True ) , <str> : fields . float ( <str> , digits = ( 4 , 2 ) , help = <str> ) , <str> : fields . float ( <str> , digits_compute = dp . get_precision ( <str> ) ) , } _defaults = { <str> : lambda * a : time . strftime ( <str> ) } def on_change_price ( self , cr , uid , ids , gross_amount , discount ) :          res = { <str> : { <str> : gross_amount * ( 1 - ( discount or 0.0 ) / 100.0 ) } } return res    