import os import numpy as np import matplotlib . pyplot as plt from jaratoolbox import settings import figparams FIGNAME = <str> outputDir = os . path . join ( settings . FIGURES_DATA_PATH , figparams . STUDY_NAME , FIGNAME ) scriptFullPath = os . path . realpath ( __file__ ) paneldataFilename = <str> paneldataFullPath = os . path . join ( outputDir , paneldataFilename ) allSessions = [ ] allSessions . append ( { <str> : <str> , <str> : <str> , <str> : <str> , <str> : <str> , <str> : [ 1050 , 1250 ] , <str> : - 4 } ) allSessions . append ( { <str> : <str> , <str> : <str> , <str> : <str> , <str> : <str> , <str> : [ 916 , 1116 ] , <str> : - 4 } ) allSessions . append ( { <str> : <str> , <str> : <str> , <str> : <str> , <str> : <str> , <str> : [ 632 , 832 ] , <str> : - 13.2 } ) allSessions . append ( { <str> : <str> , <str> : <str> , <str> : <str> , <str> : <str> , <str> : [ 395 , 595 ] , <str> : - 2.4 } ) stimSamples = [ 73 , 109 ] plt . clf ( ) ax1 = plt . subplot ( 2 , 2 , 1 ) plt . hold ( 1 ) plt . ylabel ( <str> ) ax2 = plt . subplot ( 2 , 2 , 3 , sharex = ax1 ) plt . hold ( 1 ) plt . ylabel ( <str> ) ax3 = plt . subplot ( 2 , 2 , 2 ) plt . hold ( 1 ) plt . ylabel ( <str> ) ax4 = plt . subplot ( 2 , 2 , 4 , sharex = ax3 ) plt . hold ( 1 ) plt . ylabel ( <str> ) headAngleEachCond = [ ] stimBoolEachCond = [ ] stimSideEachCond = [ ] stimRegionEachCond = [ ] for inds , oneSession in enumerate ( allSessions ) :      subject = oneSession [ <str> ] session = oneSession [ <str> ] sampleRange = oneSession [ <str> ] samples = range ( * sampleRange ) headangleFilename = <str> . format ( subject , session ) headangleFullPath = os . path . join ( outputDir , headangleFilename ) haFile = np . load ( headangleFullPath ) headAngle = haFile [ <str> ] stimBool = haFile [ <str> ] headAngleEachCond . append ( headAngle [ samples ] - oneSession [ <str> ] ) stimBoolEachCond . append ( stimBool [ : , samples ] ) stimSideEachCond . append ( oneSession [ <str> ] ) stimRegionEachCond . append ( oneSession [ <str> ] ) SHOW_FULLSESSION = 0 if SHOW_FULLSESSION :          plt . clf ( ) plt . hold ( 1 ) ax1 = plt . subplot ( 2 , 1 , 1 ) plt . plot ( headAngle , <str> ) plt . ylabel ( <str> ) ax2 = plt . subplot ( 2 , 1 , 2 , sharex = ax1 ) plt . plot ( stimBool . T , <str> ) plt . ylabel ( <str> ) plt . show ( ) plt . waitforbuttonpress ( )   stimSideEachCond = np . array ( stimSideEachCond ) stimRegionEachCond = np . array ( stimRegionEachCond ) plt . axes ( ax1 ) thisCond = np . flatnonzero ( ( stimSideEachCond == <str> ) & ( stimRegionEachCond == <str> ) ) [ 0 ] plt . plot ( headAngleEachCond [ thisCond ] , <str> ) thisCond = np . flatnonzero ( ( stimSideEachCond == <str> ) & ( stimRegionEachCond == <str> ) ) [ 0 ] plt . plot ( headAngleEachCond [ thisCond ] , <str> ) plt . grid ( True ) plt . title ( <str> . format ( subject , session ) ) plt . axes ( ax2 ) thisCond = np . flatnonzero ( ( stimSideEachCond == <str> ) & ( stimRegionEachCond == <str> ) ) [ 0 ] plt . plot ( stimBoolEachCond [ thisCond ] [ 0 , : ] , <str> ) thisCond = np . flatnonzero ( ( stimSideEachCond == <str> ) & ( stimRegionEachCond == <str> ) ) [ 0 ] plt . plot ( stimBoolEachCond [ thisCond ] [ 0 , : ] , <str> ) plt . grid ( True ) plt . axes ( ax3 ) thisCond = np . flatnonzero ( ( stimSideEachCond == <str> ) & ( stimRegionEachCond == <str> ) ) [ 0 ] plt . plot ( headAngleEachCond [ thisCond ] , <str> ) thisCond = np . flatnonzero ( ( stimSideEachCond == <str> ) & ( stimRegionEachCond == <str> ) ) [ 0 ] plt . plot ( headAngleEachCond [ thisCond ] , <str> ) plt . grid ( True ) plt . title ( <str> . format ( subject , session ) ) plt . axes ( ax4 ) thisCond = np . flatnonzero ( ( stimSideEachCond == <str> ) & ( stimRegionEachCond == <str> ) ) [ 0 ] plt . plot ( stimBoolEachCond [ thisCond ] [ 1 , : ] , <str> ) thisCond = np . flatnonzero ( ( stimSideEachCond == <str> ) & ( stimRegionEachCond == <str> ) ) [ 0 ] plt . plot ( stimBoolEachCond [ thisCond ] [ 0 , : ] , <str> ) plt . grid ( True ) plt . show ( ) if 1 :      np . savez ( paneldataFullPath , allSessions = allSessions , stimSamples = stimSamples , stimSideEachCond = stimSideEachCond , stimRegionEachCond = stimRegionEachCond , headAngleEachCond = headAngleEachCond , stimBoolEachCond = stimBoolEachCond , script = scriptFullPath ) print <str> . format ( paneldataFullPath )   