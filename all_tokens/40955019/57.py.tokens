import os import numpy as np import pandas as pd from jaratoolbox import settings import figparams scriptFullPath = os . path . realpath ( __file__ ) qualityList = [ 1 , 6 ] maxZThreshold = 3 ISIcutoff = 0.02 switchingFilePath = os . path . join ( settings . FIGURESDATA , figparams . STUDY_NAME ) switchingFileName = <str> switchingFullPath = os . path . join ( switchingFilePath , switchingFileName ) allcells_switching = pd . read_hdf ( switchingFullPath , key = <str> ) goodcells = ( allcells_switching . cellQuality . isin ( qualityList ) ) & ( allcells_switching . ISI <= 0.02 ) allcells = allcells_switching [ goodcells & ( allcells_switching . cellInStr == 1 ) ] sigMod = np . array ( ( allcells . modSig <= 0.05 ) , dtype = bool ) dataToPlot = { <str> : sigMod , <str> : allcells . modIndex , <str> : allcells . animalName } outputDir = os . path . join ( settings . FIGURESDATA , figparams . STUDY_NAME ) outputFile = <str> outputFullPath = os . path . join ( outputDir , outputFile ) np . savez ( outputFullPath , sourceSwitching = switchingFilePath , goodCellQuality = qualityList , script = scriptFullPath , ** dataToPlot ) responsiveMidFreqs = abs ( allcells_switching . maxZSoundMid ) >= maxZThreshold allcellsResponsive = allcells_switching [ goodcells & responsiveMidFreqs & ( allcells_switching . cellInStr == 1 ) ] sigMod = np . array ( ( allcellsResponsive . modSig <= 0.05 ) & ( allcellsResponsive . modDir >= 1 ) , dtype = bool ) dataToPlot = { <str> : sigMod , <str> : allcellsResponsive . modIndex , <str> : allcellsResponsive . animalName } outputDir = os . path . join ( settings . FIGURESDATA , figparams . STUDY_NAME ) outputFile = <str> outputFullPath = os . path . join ( outputDir , outputFile ) np . savez ( outputFullPath , sourceSwitching = switchingFilePath , maxZThreshold = maxZThreshold , goodCellQuality = qualityList , ISIcutoff = ISIcutoff , script = scriptFullPath , ** dataToPlot )  