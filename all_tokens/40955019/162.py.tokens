import os import numpy as np from jaratoolbox import settings from jaratoolbox import celldatabase import pandas as pd import figparams dbPath = os . path . join ( settings . FIGURES_DATA_PATH , figparams . STUDY_NAME , <str> ) db = celldatabase . load_hdf ( dbPath ) goodISI = db . query ( <str> ) goodShape = goodISI . query ( <str> ) goodLaser = goodShape . query ( <str> ) goodPulseLatency = goodLaser . query ( <str> ) goodNSpikes = goodPulseLatency . query ( <str> ) goodSoundResponsiveBool = ( ~ pd . isnull ( goodNSpikes [ <str> ] ) ) | ( ~ pd . isnull ( goodNSpikes [ <str> ] ) ) | ( goodNSpikes [ <str> ] < 0.05 ) goodSoundResponsive = goodNSpikes [ goodSoundResponsiveBool ] goodSoundResponsive [ <str> ] = np . sqrt ( goodSoundResponsive [ <str> ] * goodSoundResponsive [ <str> ] ) goodFit = goodSoundResponsive . query ( <str> ) goodFitToUse = goodFit . query ( <str> ) print goodSoundResponsive [ [ <str> , <str> , <str> , <str> , <str> , <str> ] ] . groupby ( [ <str> , <str> ] ) . agg ( [ <str> ] ) print goodFitToUse [ [ <str> , <str> , <str> , <str> , <str> , <str> ] ] . groupby ( [ <str> , <str> ] ) . agg ( [ <str> ] ) db = goodFitToUse subject = <str> date = <str> depth = 3256.0 tetrode = 6 cluster = 3 indRow , dbRow = celldatabase . find_cell ( db , subject , date , depth , tetrode , cluster ) print indRow subject = <str> date = <str> depth = 1904.0 tetrode = 6 cluster = 6 indRow , dbRow = celldatabase . find_cell ( db , subject , date , depth , tetrode , cluster ) print indRow db = goodNSpikes subject = <str> date = <str> depth = 1604.0 tetrode = 4 cluster = 2 indRow , dbRow = celldatabase . find_cell ( db , subject , date , depth , tetrode , cluster ) print indRow subject = <str> date = <str> depth = 1414.0 tetrode = 5 cluster = 6 indRow , dbRow = celldatabase . find_cell ( db , subject , date , depth , tetrode , cluster ) print indRow subject = <str> date = <str> depth = 2902.0 tetrode = 8 cluster = 4 subject = <str> date = <str> depth = 3707.0 tetrode = 2 cluster = 3 indRow , dbRow = celldatabase . find_cell ( db , subject , date , depth , tetrode , cluster ) print indRow  