import os import pandas as pd import numpy as np import scipy . stats from jaratoolbox import celldatabase from jaratoolbox import spikesanalysis from jaratoolbox import ephyscore from jaratoolbox import behavioranalysis from jaratoolbox import settings import figparams import studyparams dbFilename = os . path . join ( settings . FIGURES_DATA_PATH , figparams . STUDY_NAME , <str> ) db = celldatabase . load_hdf ( dbFilename ) figName = <str> dataDir = os . path . join ( settings . FIGURES_DATA_PATH , <str> , figName ) bestCells = db . query ( studyparams . SINGLE_UNITS ) bestCells = bestCells . query ( studyparams . GOOD_CELLS ) sustPVCells = bestCells . query ( studyparams . PV_CELLS ) sustSOMCells = bestCells . query ( studyparams . SOM_CELLS ) sustExCells = bestCells . query ( studyparams . EXC_CELLS ) PVsustainedSuppression = sustPVCells [ <str> ] SOMsustainedSuppression = sustSOMCells [ <str> ] ExsustainedSuppression = sustExCells [ <str> ] fitPVsustainedSuppression = sustPVCells [ <str> ] fitSOMsustainedSuppression = sustSOMCells [ <str> ] fitExsustainedSuppression = sustExCells [ <str> ] PVsustainedPrefBW = sustPVCells [ <str> ] SOMsustainedPrefBW = sustSOMCells [ <str> ] ExsustainedPrefBW = sustExCells [ <str> ] fitPVsustainedPrefBW = sustPVCells [ <str> ] fitSOMsustainedPrefBW = sustSOMCells [ <str> ] fitExsustainedPrefBW = sustExCells [ <str> ] PVonsetProp = sustPVCells [ <str> ] SOMonsetProp = sustSOMCells [ <str> ] ExonsetProp = sustExCells [ <str> ] PVSOMonsetProppVal = scipy . stats . ranksums ( PVonsetProp , SOMonsetProp ) [ 1 ] PVExonsetProppVal = scipy . stats . ranksums ( PVonsetProp , ExonsetProp ) [ 1 ] ExSOMonsetProppVal = scipy . stats . ranksums ( ExonsetProp , SOMonsetProp ) [ 1 ] ExAMrate = sustExCells [ <str> ] PVAMrate = sustPVCells [ <str> ] SOMAMrate = sustSOMCells [ <str> ] outputFile = <str> outputFullPath = os . path . join ( dataDir , outputFile ) np . savez ( outputFullPath , PVonsetProp = PVonsetProp , SOMonsetProp = SOMonsetProp , ExcOnsetProp = ExonsetProp , PVSOMonsetProppVal = PVSOMonsetProppVal , PVExconsetProppVal = PVExonsetProppVal , ExcSOMonsetProppVal = ExSOMonsetProppVal , rawPVsustainedSuppressionInd = PVsustainedSuppression , rawSOMsustainedSuppressionInd = SOMsustainedSuppression , rawExcSustainedSuppressionInd = ExsustainedSuppression , fitPVsustainedSuppressionInd = fitPVsustainedSuppression , fitSOMsustainedSuppressionInd = fitSOMsustainedSuppression , fitExcSustainedSuppressionInd = fitExsustainedSuppression , rawPVsustainedPrefBW = PVsustainedPrefBW , rawSOMsustainedPrefBW = SOMsustainedPrefBW , rawExcSustainedPrefBW = ExsustainedPrefBW , fitPVsustainedPrefBW = fitPVsustainedPrefBW , fitSOMsustainedPrefBW = fitSOMsustainedPrefBW , fitExcSustainedPrefBW = fitExsustainedPrefBW , ExAMrate = ExAMrate , PVAMrate = PVAMrate , SOMAMrate = SOMAMrate ) print outputFile + <str>   