from __future__ import print_function import tensorflow as tf import numpy as np import odl import odl . contrib . tensorflow sess = tf . InteractiveSession ( ) matrix = np . array ( [ [ 1 , 2 ] , [ 0 , 0 ] , [ 0 , 1 ] ] , dtype = <str> ) odl_op_pure = odl . MatrixOperator ( matrix ) input_tensor = tf . placeholder ( tf . float32 , shape = [ 2 ] ) output_tensor = tf . reshape ( tf . matmul ( matrix , tf . expand_dims ( input_tensor , 1 ) ) , [ 3 ] ) odl_op_tensorflow = odl . contrib . tensorflow . TensorflowOperator ( input_tensor , output_tensor ) x = [ 1. , 2. ] dx = [ 3. , 4. ] dy = [ 1. , 2. , 3. ] print ( <str> , odl_op_tensorflow ( x ) ) print ( <str> , odl_op_pure ( x ) ) print ( <str> , odl_op_tensorflow . derivative ( x ) ( dx ) ) print ( <str> , odl_op_pure . derivative ( x ) ( dx ) ) print ( <str> , odl_op_tensorflow . derivative ( x ) . adjoint ( dy ) ) print ( <str> , odl_op_pure . derivative ( x ) . adjoint ( dy ) )  