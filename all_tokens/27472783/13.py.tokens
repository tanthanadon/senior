from __future__ import print_function from genestack_client import FilesUtil , get_connection , make_connection_parser parser = make_connection_parser ( ) parser . add_argument ( <str> , help = <str> ) parser . add_argument ( <str> , action = <str> , help = <str> ) args = parser . parse_args ( ) source_folder = args . folder move_files = args . move_files print ( <str> ) connection = get_connection ( args ) files_util = FilesUtil ( connection ) print ( <str> ) files = files_util . get_file_children ( source_folder ) files_count = len ( files ) print ( <str> % files_count ) infos = files_util . get_complete_infos ( files ) output_folder = files_util . create_folder ( <str> , parent = source_folder ) grouping_folders = { } for i , entry in enumerate ( infos , 1 ) :      accession = entry [ <str> ] print ( <str> % ( i , files_count , accession ) ) app_entry = entry . get ( <str> ) if app_entry :          application = app_entry . get ( <str> ) or app_entry . get ( <str> , <str> )  else :          application = <str>  if application not in grouping_folders :          new_folder = files_util . create_folder ( <str> % application , parent = output_folder ) grouping_folders [ application ] = new_folder  files_util . link_file ( accession , grouping_folders [ application ] ) if move_files :          files_util . unlink_file ( accession , source_folder )   print ( <str> % output_folder )  