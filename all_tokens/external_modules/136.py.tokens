from openerp import models , api class StockPicking ( models . Model ) :      _inherit = <str> @ api . model def _create_invoice_from_picking ( self , picking , vals ) :          invoice_id = super ( StockPicking , self ) . _create_invoice_from_picking ( picking , vals ) inv_type = self . env . context . get ( <str> , <str> ) if picking and picking . sale_id and inv_type == <str> :              sale_order = picking . sale_id if sale_order . payment_mode_id and sale_order . payment_mode_id . payment_order_type == <str> :                  invoice = self . env [ <str> ] . browse ( invoice_id ) invoice_partner = invoice . partner_id . commercial_partner_id mandate_obj = self . env [ <str> ] mandates = mandate_obj . search ( [ ( <str> , <str> , invoice_partner . bank_ids . ids ) , ( <str> , <str> , True ) , ( <str> , <str> , <str> ) ] ) mandate_sel = False if mandates :                      mandate_sel = mandates [ 0 ]  else :                      mandates = mandate_obj . search ( [ ( <str> , <str> , invoice_partner . bank_ids . ids ) , ( <str> , <str> , <str> ) ] ) if mandates :                          mandate_sel = mandates [ 0 ]   if mandate_sel :                      invoice . mandate_id = mandate_sel . id , invoice . partner_bank_id = mandate_sel . partner_bank_id . id  elif invoice_partner . bank_ids :                      invoice . partner_bank_id = invoice_partner . bank_ids [ 0 ] . id    return invoice_id    