from functools import partial from PyQt5 import QtWidgets from lib . unidades import Temperature , Pressure , Power , VolFlow , Currency from tools . costIndex import CostData from equipment . parents import UI_equip from equipment . heatExchanger import Fired_Heater from UI . widgets import Entrada_con_unidades class UI_equipment ( UI_equip ) :      Equipment = Fired_Heater ( ) def __init__ ( self , equipment = None , parent = None ) :          super ( ) . __init__ ( Fired_Heater , entrada = False , salida = False , parent = parent ) layout = QtWidgets . QGridLayout ( self . tabCalculo ) layout . addWidget ( QtWidgets . QLabel ( QtWidgets . QApplication . translate ( <str> , <str> ) ) , 1 , 1 ) self . Tout = Entrada_con_unidades ( Temperature , resaltado = True ) self . Tout . valueChanged . connect ( partial ( self . changeParams , <str> ) ) layout . addWidget ( self . Tout , 1 , 2 ) layout . addItem ( QtWidgets . QSpacerItem ( 10 , 10 , QtWidgets . QSizePolicy . Fixed , QtWidgets . QSizePolicy . Fixed ) , 2 , 0 , 1 , 6 ) layout . addWidget ( QtWidgets . QLabel ( QtWidgets . QApplication . translate ( <str> , <str> ) ) , 3 , 1 ) self . deltaP = Entrada_con_unidades ( Pressure ) self . deltaP . valueChanged . connect ( partial ( self . changeParams , <str> ) ) layout . addWidget ( self . deltaP , 3 , 2 ) layout . addWidget ( QtWidgets . QLabel ( QtWidgets . QApplication . translate ( <str> , <str> ) ) , 4 , 1 ) self . Hmax = Entrada_con_unidades ( Power ) self . Hmax . valueChanged . connect ( partial ( self . changeParams , <str> ) ) layout . addWidget ( self . Hmax , 4 , 2 ) layout . addWidget ( QtWidgets . QLabel ( QtWidgets . QApplication . translate ( <str> , <str> ) ) , 5 , 1 ) self . poderCalorifico = Entrada_con_unidades ( float ) self . poderCalorifico . valueChanged . connect ( partial ( self . changeParams , <str> ) ) layout . addWidget ( self . poderCalorifico , 5 , 2 ) layout . addWidget ( QtWidgets . QLabel ( QtWidgets . QApplication . translate ( <str> , <str> ) ) , 6 , 1 ) self . eficiencia = Entrada_con_unidades ( float , spinbox = True ) self . eficiencia . valueChanged . connect ( partial ( self . changeParams , <str> ) ) layout . addWidget ( self . eficiencia , 6 , 2 ) layout . addItem ( QtWidgets . QSpacerItem ( 10 , 10 , QtWidgets . QSizePolicy . Expanding , QtWidgets . QSizePolicy . Expanding ) , 7 , 0 , 1 , 6 ) group = QtWidgets . QGroupBox ( QtWidgets . QApplication . translate ( <str> , <str> ) ) layout . addWidget ( group , 8 , 1 , 1 , 5 ) lyt = QtWidgets . QGridLayout ( group ) lyt . addWidget ( QtWidgets . QLabel ( QtWidgets . QApplication . translate ( <str> , <str> ) ) , 0 , 1 ) self . Heat = Entrada_con_unidades ( Power , retornar = False , readOnly = True ) lyt . addWidget ( self . Heat , 0 , 2 ) lyt . addWidget ( QtWidgets . QLabel ( QtWidgets . QApplication . translate ( <str> , <str> ) ) , 1 , 1 ) self . CombustibleRequerido = Entrada_con_unidades ( VolFlow , <str> , retornar = False , readOnly = True ) lyt . addWidget ( self . CombustibleRequerido , 1 , 2 ) layout . addItem ( QtWidgets . QSpacerItem ( 20 , 20 , QtWidgets . QSizePolicy . Fixed , QtWidgets . QSizePolicy . Fixed ) , 9 , 0 , 1 , 6 ) lyt_Cost = QtWidgets . QGridLayout ( self . tabCostos ) lyt_Cost . addWidget ( QtWidgets . QLabel ( QtWidgets . QApplication . translate ( <str> , <str> ) ) , 1 , 1 ) self . tipo = QtWidgets . QComboBox ( ) for txt in self . Equipment . TEXT_TIPO :              self . tipo . addItem ( txt )  self . tipo . currentIndexChanged . connect ( self . mostrarSubclasificacion ) lyt_Cost . addWidget ( self . tipo , 1 , 2 ) self . label = QtWidgets . QLabel ( ) lyt_Cost . addWidget ( self . label , 2 , 1 ) self . subtipoBox = QtWidgets . QComboBox ( ) for txt in self . Equipment . TEXT_SUBTIPOBOX :              self . subtipoBox . addItem ( txt )  self . subtipoBox . currentIndexChanged . connect ( partial ( self . changeParamsCoste , <str> ) ) lyt_Cost . addWidget ( self . subtipoBox , 2 , 2 ) self . subtipoCylindrical = QtWidgets . QComboBox ( ) for txt in self . Equipment . TEXT_SUBTIPOCYLINDRICAL :              self . subtipoCylindrical . addItem ( txt )  self . subtipoCylindrical . currentIndexChanged . connect ( partial ( self . changeParamsCoste , <str> ) ) lyt_Cost . addWidget ( self . subtipoCylindrical , 2 , 2 ) lyt_Cost . addWidget ( QtWidgets . QLabel ( QtWidgets . QApplication . translate ( <str> , <str> ) ) , 3 , 1 ) self . material = QtWidgets . QComboBox ( ) for txt in self . Equipment . TEXT_MATERIAL :              self . material . addItem ( txt )  self . material . currentIndexChanged . connect ( partial ( self . changeParamsCoste , <str> ) ) lyt_Cost . addWidget ( self . material , 3 , 2 ) lyt_Cost . addWidget ( QtWidgets . QLabel ( QtWidgets . QApplication . translate ( <str> , <str> ) ) , 4 , 1 ) self . P_dis = Entrada_con_unidades ( Pressure ) self . P_dis . valueChanged . connect ( partial ( self . changeParamsCoste , <str> ) ) lyt_Cost . addWidget ( self . P_dis , 4 , 2 ) lyt_Cost . addItem ( QtWidgets . QSpacerItem ( 20 , 20 , QtWidgets . QSizePolicy . Expanding , QtWidgets . QSizePolicy . Expanding ) , 5 , 1 , 1 , 6 ) self . Costos = CostData ( self . Equipment ) self . Costos . valueChanged . connect ( self . changeParamsCoste ) lyt_Cost . addWidget ( self . Costos , 6 , 1 , 2 , 5 ) lyt_Cost . addItem ( QtWidgets . QSpacerItem ( 20 , 20 , QtWidgets . QSizePolicy . Expanding , QtWidgets . QSizePolicy . Expanding ) , 8 , 1 , 1 , 6 ) group = QtWidgets . QGroupBox ( QtWidgets . QApplication . translate ( <str> , <str> ) ) lyt_Cost . addWidget ( group , 9 , 1 , 1 , 6 ) layout = QtWidgets . QGridLayout ( group ) layout . addWidget ( QtWidgets . QLabel ( QtWidgets . QApplication . translate ( <str> , <str> ) ) , 0 , 1 ) self . C_adq = Entrada_con_unidades ( Currency , retornar = False ) self . C_adq . setReadOnly ( True ) layout . addWidget ( self . C_adq , 0 , 2 ) layout . addWidget ( QtWidgets . QLabel ( QtWidgets . QApplication . translate ( <str> , <str> ) ) , 1 , 1 ) self . C_inst = Entrada_con_unidades ( Currency , retornar = False ) self . C_inst . setReadOnly ( True ) layout . addWidget ( self . C_inst , 1 , 2 ) lyt_Cost . addItem ( QtWidgets . QSpacerItem ( 20 , 20 , QtWidgets . QSizePolicy . Fixed , QtWidgets . QSizePolicy . Fixed ) , 10 , 1 , 1 , 6 ) self . mostrarSubclasificacion ( 0 ) if equipment :              self . setEquipment ( equipment )   def mostrarSubclasificacion ( self , ind ) :          if ind :              txt = QtWidgets . QApplication . translate ( <str> , <str> )  else :              txt = QtWidgets . QApplication . translate ( <str> , <str> )  self . label . setText ( txt ) self . subtipoBox . setVisible ( not ind ) self . subtipoCylindrical . setVisible ( ind ) self . changeParamsCoste ( <str> , ind )   if __name__ == <str> :      import sys from lib . corriente import Corriente from equipment . heatExchanger import Fired_Heater app = QtWidgets . QApplication ( sys . argv ) agua = Corriente ( T = 300 , P = 101325. , caudalMasico = 0.01 , fraccionMasica = [ 1. ] ) fireheater = Fired_Heater ( entrada = agua , Tout = 450 ) dialogo = UI_equipment ( fireheater ) dialogo . show ( ) sys . exit ( app . exec_ ( ) )   